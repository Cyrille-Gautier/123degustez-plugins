!function(e){"use strict";window.widgetSubscribeForm=function(s){var i=s.find(".jet-subscribe-form"),a=s.data("id"),t=i.data("settings"),r=null,n="jet_subscribe_form_ajax",o=!1,l=e(".jet-subscribe-form__form",i),d=(e(".jet-subscribe-form__fields",i),e(".jet-subscribe-form__mail-field",i)),c=d.data("instance-data"),m=e(".jet-subscribe-form__submit",i),u=e(".jet-subscribe-form__message",i),b=window.jetElements.messages.invalidMail||"Please specify a valid email";function f(){var s=d.val(),f={email:s,use_target_list_id:t.use_target_list_id||!1,target_list_id:t.target_list_id||"",data:c},v=l.serializeArray(),_={};JetElementsTools.validateEmail(s)?(e.each(v,function(e,s){"email"===s.name?f[s.name]=s.value:_[s.name]=s.value}),f.additional=_,!o&&r&&r.abort(),r=e.ajax({type:"POST",url:window.jetElements.ajaxUrl,data:{action:n,data:f},cache:!1,beforeSend:function(){m.addClass("loading"),o=!1},success:function(s){var r=s.type,n=s.message||"",l="jet-subscribe-form--response-"+r;m.removeClass("loading"),o=!0,i.removeClass("jet-subscribe-form--response-error"),i.addClass(l),e("span",u).html(n),u.css({visibility:"visible"}),setTimeout(function(){u.css({visibility:"hidden"}),i.removeClass(l)},2e4),t.redirect&&(window.location.href=t.redirect_url),e(window).trigger({type:"jet-elements/subscribe",elementId:a,successType:r,inputData:c})}})):(d.addClass("mail-invalid"),i.addClass("jet-subscribe-form--response-error"),e("span",u).html(b),u.css({visibility:"visible"}),setTimeout(function(){i.removeClass("jet-subscribe-form--response-error"),u.css({visibility:"hidden"}),d.removeClass("mail-invalid")},2e4))}d.on("focus",function(){d.removeClass("mail-invalid")}),e(document).keydown(function(e){if(13===e.keyCode&&d.is(":focus"))return f(),!1}),m.on("click",function(){return f(),!1})}}(jQuery);