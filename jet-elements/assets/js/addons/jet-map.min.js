!function(e){"use strict";function o(e,o=","){return e?e.split(o).reduce(function(e,o){var i=o.split("|"),t=i[0].toLowerCase();return new RegExp(/[-_a-z0-9]+/).test(t)?"href"===t||"on"===t.substring(0,2)?e:e+t+'="'+(void 0!==i[1]?i[1].trim():"")+'" ':e},""):""}window.widgetMap=function(i){var t,n,a,l,s,r=i.find(".jet-map"),p=0,c=[];if(r.length)if(n=r.data("init")||{},a=r.data("pins")||[],s=r.data("provider")||n.provider||"google",l=!!n.pinsAutoClose,"leaflet"!==s)if("mapbox"!==s){if(window.google){if(!0===l&&(p=1),"undefined"!=typeof console){const e=console.warn;console.warn=function(o){o&&o.includes("google.maps.Marker is deprecated")||e.apply(console,arguments)}}t=new google.maps.Map(r[0],n),a&&e.each(a,function(i,n){var a,s,r,d={position:n.position,map:t,title:n.address};if(n.image)if(void 0!==n.image_width&&void 0!==n.image_height){var m={url:n.image,scaledSize:new google.maps.Size(n.image_width,n.image_height),origin:new google.maps.Point(0,0),anchor:new google.maps.Point(n.image_width/2,n.image_height/2)};d.icon=m}else d.icon=n.image;(a=new google.maps.Marker(d),""!==n.desc||void 0!==n.link_title)&&(void 0!==n.link_title&&n.link&&(r='<div class="jet-map-pin__wrapper"><a class="jet-map-pin__link" href="'+(n.link.url||"#")+'" '+("on"===n.link.is_external?'target="_blank"':"")+("on"===n.link.nofollow?'rel="nofollow"':"")+(n.link.custom_attributes?o(n.link.custom_attributes):"")+">"+n.link_title+"</a></div>",n.desc+=r),s=new google.maps.InfoWindow({content:n.desc,disableAutoPan:!0}),c[i]=s);a.addListener("click",function(){s.setOptions({disableAutoPan:!1}),!0===l&&e.each(c,function(e,o){o.close()}),s.open(t,a)}),1===p?"visible"===n.state&&""!==n.desc&&(s.open(t,a),p++):0===p&&"visible"===n.state&&""!==n.desc&&s.open(t,a)})}}else!function(e,i,t){if(void 0!==window.mapboxgl)if(void 0!==window.jetElements&&jetElements.mapboxToken){mapboxgl.accessToken=jetElements.mapboxToken;var n=e.attr("id");n||(n="jet-map-"+Math.random().toString(36).substr(2,9),e.attr("id",n));var a={container:n,style:i.mapboxStyle||"mapbox://styles/mapbox/streets-v11",center:i.center?[i.center.lng,i.center.lat]:[0,0],zoom:i.zoom||11},l=new mapboxgl.Map(a);!1===i.scrollwheel&&l.scrollZoom.disable(),!1===i.draggable&&(l.dragPan.disable(),l.dragRotate.disable(),l.touchZoomRotate.disable(),l.boxZoom.disable(),l.doubleClickZoom.disable(),l.keyboard.disable()),!1!==i.zoomControl&&l.addControl(new mapboxgl.NavigationControl);var s=!!i.pinsAutoClose,r=[],p=[];l.on("load",function(){t&&t.forEach(function(e){if(e.position){var i;if(e.image){var t=document.createElement("div");t.className="jet-mapbox-marker";var n=document.createElement("img");n.src=e.image,e.image_width&&(n.style.width=e.image_width+"px"),e.image_height&&(n.style.height=e.image_height+"px"),t.appendChild(n),i=new mapboxgl.Marker(t)}else i=new mapboxgl.Marker;if(i.setLngLat([e.position.lng,e.position.lat]).addTo(l),i.getElement().style.cursor="pointer",e.desc||e.link_title&&e.link){var a=e.desc||"";if(e.link_title&&e.link){var c=e.link.url||"#",d="on"===e.link.is_external?'target="_blank"':"",m="on"===e.link.nofollow?'rel="nofollow"':"",g=e.link.custom_attributes?o(e.link.custom_attributes):"",u='<div class="jet-map-pin__wrapper"><a class="jet-map-pin__link" href="'+c+'" '+d+m+g+">"+e.link_title+"</a></div>";a+=u}var f=new mapboxgl.Popup({closeButton:!0,closeOnClick:!1,focusAfterOpen:!1,className:"jet-map-box",maxWidth:"320px"}).setHTML(a);!function(e){e.on("open",function(){s&&(r.forEach(function(e){e.remove()}),r=[]),r.push(e)}),e.on("close",function(){r=r.filter(function(o){return o!==e})})}(f),i.setPopup(f),"visible"===e.state&&""!==e.desc&&p.push(function(){i.getPopup().isOpen()||i.togglePopup()})}}}),p.length&&p.forEach(function(e){e()})})}else console.warn("Mapbox access token is missing.")}(r,n,a);else!function(e,i,t){if(void 0!==window.L){var n={zoom:i.zoom||11,scrollWheelZoom:i.scrollwheel,zoomControl:i.zoomControl};i.center?n.center=[i.center.lat,i.center.lng]:n.center=[0,0],!1===i.draggable&&(n.dragging=!1);var a=window.L.map(e[0],n),l=window.JetElementsLeafletTiles||{},s=l.url||"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",r=l.options||{attribution:'&copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a>'};window.L.tileLayer(s,r).addTo(a),!1===i.scrollwheel&&a.scrollWheelZoom.disable(),!1===i.zoomControl&&a.zoomControl&&a.zoomControl.remove(),!1===i.draggable&&a.dragging.disable();var p=null,c=i.pinsAutoClose?1:0;t&&t.forEach(function(e){if(e.position){var t={};if(e.image){var n={iconUrl:e.image};void 0!==e.image_width&&void 0!==e.image_height&&(n.iconSize=[e.image_width,e.image_height],n.iconAnchor=[e.image_width/2,e.image_height/2]),t.icon=window.L.icon(n)}var l=window.L.marker([e.position.lat,e.position.lng],t).addTo(a);if(""!==e.desc||void 0!==e.link_title){var s=e.desc||"";if(void 0!==e.link_title&&e.link){var r=e.link.url||"#",d="on"===e.link.is_external?'target="_blank"':"",m="on"===e.link.nofollow?'rel="nofollow"':"",g=e.link&&e.link.custom_attributes?o(e.link.custom_attributes):"",u='<div class="jet-map-pin__wrapper"><a class="jet-map-pin__link" href="'+r+'" '+d+m+g+">"+e.link_title+"</a></div>";s+=u}var f={className:"jet-map-box",autoClose:!!i.pinsAutoClose,closeOnClick:!!i.pinsAutoClose};l.bindPopup(s,f),i.pinsAutoClose&&l.on("popupopen",function(e){p&&p!==e.popup&&p.close(),p=e.popup})}"visible"===e.state&&""!==e.desc&&(1===c?(l.openPopup(),c++):0===c&&l.openPopup())}})}}(r,n,a)}}(jQuery);